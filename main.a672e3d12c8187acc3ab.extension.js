!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=1)}([function(t){t.exports=JSON.parse('{"rowCount":1,"totalCount":1,"composition":{"variables":[{"variable":"p_image","visibilityAreaSelector":".ext-product-image","canHide":true,"hidden":false},{"variable":"p_name","visibilityAreaSelector":".ext-product-name","canHide":true,"hidden":false},{"variable":"p_vendor_code","visibilityAreaSelector":".ext-product-vendor-code","canHide":true,"hidden":true},{"variable":"p_dimensions","visibilityAreaSelector":".ext-product-dimensions","canHide":true,"hidden":true},{"variable":"p_price","visibilityAreaSelector":".ext-product-price","canHide":true,"hidden":false},{"variable":"p_button","visibilityAreaSelector":".ext-product-button","canHide":true,"hidden":false}]}}')},function(t,e,o){t.exports=o(2)},function(t,e,o){"use strict";o.r(e);var n={name:null,iconClass:null,uniqueClassName:null,canBeSavedToLibrary:!1,settingsCssPath:null,previewCssPath:null,i18n:{},blockName:null,emptyContainerIcon:!1,blockType:null,blockConfigAttributeNames:[],controlsToCreate:[],blockControls:[],isEnabled:function(){return!0},emailInitialized:function(t){},onSelectBlock:function(t){},getBlockLayoutToDrop:function(){return"<td>Default block</td>"},blockDropped:function(t){},getBlockLabel:function(t){return"Default block"},getDefaultSettingsPanelState:function(t){return{}},onCleanLayout:function(t,e){},onBlockCopy:function(t,e){}},r=("".concat("demoProductBlock","_blockBorder_control"),"".concat("demoProductBlock","_blockPadding_control"),"".concat("demoProductBlock","_blockGroups_control")),i="".concat("demoProductBlock","_blockText_control"),c=("".concat("demoProductBlock","_cardOrientation_control"),"".concat("demoProductBlock","_cardsInRowCount_control"),"".concat("demoProductBlock","_cardBackgroundColor_control"),"".concat("demoProductBlock","_cardBorder_control"),"".concat("demoProductBlock","_cardComposition_control"),"".concat("demoProductBlock","_cardTextColor_control"),"".concat("demoProductBlock","_cardTextAlign_control"),"".concat("demoProductBlock","_cardTextStyle_control"),"".concat("demoProductBlock","_cardTextPadding_control"),"".concat("demoProductBlock","_cardTextLineSpacing_control"),"".concat("demoProductBlock","_cardButtonText_control"),"".concat("demoProductBlock","_cardButtonStyle_control"),"".concat("demoProductBlock","_cardButtonColor_control"),"".concat("demoProductBlock","_cardButtonTextColor_control"),"".concat("demoProductBlock","_cardButtonBorder_control"),"".concat("demoProductBlock","_cardButtonBorderRadius_control"),"".concat("demoProductBlock","_cardButtonAlign_control"),"".concat("demoProductBlock","_cardButtonStretch_control"),"".concat("demoProductBlock","_cardButtonExternalPadding_control"),"".concat("demoProductBlock","_cardButtonInternalPadding_control"),"".concat("demoProductBlock","_cardImageSize_control"),{en:{"block.name":"Custom-Blocks","preview.label":"Custom-Blocks","preview.empty.description":"Select Custom Block","settings.controls.blockBorder.label":"Block border","settings.controls.blockPadding.label":"Row padding","settings.controls.blockPadding.mobile.label":"Row mobile padding","settings.controls.blockMargin.label":"Block margin","settings.controls.bgColor.label":"Card background color","settings.controls.cardBorder.label":"Card border","settings.controls.cardButtonExternalPadding.label":"External padding","settings.controls.cardButtonExternalPadding.mobile.label":"External mobile padding","settings.controls.groups.empty":"Select the group","settings.controls.text-title.empty":"Enter the title","settings.controls.orientation.label":"Orientation","settings.controls.orientation.horizontal":"Horizontal","settings.controls.orientation.vertical":"Vertical"}}),l={onActivated:function(){this.registerSettingsEventListener("layoutChanged",this.layoutChanged.bind(this))},layoutChanged:function(){this.applyThemeFromConfig(),this.updateControlVisibility()},applyThemeFromConfig:function(){this.themeKey&&this.isControlVisible()&&this.panelState.blockConfig.theme[this.themeKey]&&this.updateControlValue(this.panelState.blockConfig.theme[this.themeKey])},controlValueUpdated:function(t){this.themeKey&&(this.panelState.blockConfig.theme[this.themeKey]=t,this.updateBlockConfiguration())},updateLayout:function(){this.extension.updateLayout(this.jElement,this.panelState.blockConfig)},updateBlockConfiguration:function(){this.extension.blockConfigurationService.setBlockConfiguration(this.jElement,this.panelState.blockConfig)},translate:function(t,e){return this.extension.stripoApi.translate(t,e)},isValuableBlock:function(){return!!this.panelState.blockConfig.groups.length}};function a(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?a(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var p=u(u({},l),{},{name:r,render:function(){this.options=this.getOptions(),this.selectedGroups=this.getSelectedGroups(),this.jContainer.html(this.getControlMarkup()),this.dropDown=this.jContainer.find("dropdown-input")[0],this.updateSeparatorVisibility()},getOptions:function(){return this.getGroupsFromStripoConfig()?this.getGroupsFromStripoConfig().map((function(t){return{value:t.id,label:t.name}})):[]},getSelectedGroups:function(){return(this.panelState.blockConfig.groups||[]).map((function(t){return t.id}))},updateSeparatorVisibility:function(){this.setControlsSeparatorVisible(!!this.jElement.attr("data-product-groups"))},onChange:function(t){var e=this;setTimeout((function(){e.panelState.blockConfig.groups=[],t.forEach((function(t){e.panelState.blockConfig.groups.push(e.getGroupsFromStripoConfig().find((function(e){return e.id==t})))})),e.panelState.blockConfig=e.extension.wrapBlockWithTypeIdentifierAttributesAndGetConfig(e.jElement,e.panelState.blockConfig),e.updateLayout(),e.extension.updateBlockLabel(e.jElement),e.applyChanges()}),0)},getGroupsFromStripoConfig:function(){return this.extension.stripoConfig.productDemoBlock.groups},layoutChanged:function(){this.isControlVisible()&&(this.dropDown.props.value=this.getSelectedGroups()),this.updateControlVisibility(),this.updateSeparatorVisibility()},getControlMarkup:function(){return'<div class="form-group">\n            <div class="col-xs-12">\n                <dropdown-input classes="product-groups-picker"\n                                buttonWrapperClasses="form-control"\n                                optionTextClass="text"\n                                globalScope = "'.concat(this.name,'"\n                                mbBindProp-values="options"\n                                mbBindProp-value="selectedGroups"\n                                mbBindProp-on-selected="onChange"\n                                placeholder="').concat(this.translate("settings.controls.groups.empty"),'"\n                                multi="true">                                       \n                </dropdown-input>\n            </div>\n        </div>')}});function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function g(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){f(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function f(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var b=g(g({},l),{},{name:i,render:function(){this.options=this.getOptions(),this.selectedGroups=this.getSelectedGroups(),this.jContainer.html(this.getControlMarkup()),this.textControl=this.jContainer.find("input")[0]},getOptions:function(){return this.getGroupsFromStripoConfig()?this.getGroupsFromStripoConfig().map((function(t){return{value:t.id,label:t.name}})):[]},getSelectedGroups:function(){return(this.panelState.blockConfig.groups||[]).map((function(t){return t.id}))},onChange:function(){alert("TextControl-OnChange")},getGroupsFromStripoConfig:function(){return this.extension.stripoConfig.productDemoBlock.groups},layoutChanged:function(){console.log("TextControl-LayoutChanged")},getControlMarkup:function(){return'<div class="form-group">\n            <div class="col-xs-4">\n            Header - Title\n            </div>\n            <div class="col-xs-8">\n                <input classes="form-control"\n                                id="txtTitle"\n                                buttonWrapperClasses="form-control"\n                                optionTextClass="text"\n                                globalScope = "'.concat(this.name,'"\n                                type="text"\n                                placeholder="').concat(this.translate("settings.controls.text-title.empty"),'">                                       \n                </input>\n            </div>\n        </div>')}}),m=o(0);function h(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function y(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?h(Object(o),!0).forEach((function(e){C(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function C(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function k(t,e,o){var n=function(t){function e(t){var e=t.attr("esd-dev-product-config");return e?JSON.parse(e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#x27;/g,"'").replace(/&quot;/g,'"')):null}return{getBlockConfiguration:e,setBlockConfiguration:function(t,e){t.attr("esd-dev-product-config",JSON.stringify(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))},getOrCreateConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.composition=e.composition||y({},m.composition),e.theme=e.theme||{},e.orientation=e.orientation||e.recommendationsOrientation||"vertical",e.groups=e.groups||[],e.properties=e.properties||[],e.rowCount=e.rowCount||t.productDemoBlock.rowCount||3,e.totalCount=e.groups.reduce((function(t,e){return t+e.count}),0),e},getBlockConfigurationForCopiedBlock:function(t){var o=e(t);return o.recommendationsOrientation="vertical",o.rowCount=3,o.groups=[],o}}}(t);function l(t,o){console.log("updateLayout"),u(e.jQuery(this),o)}function a(t,e){e||(e=n.getBlockConfiguration(t)||{});var o=n.getOrCreateConfig(e);return o.groups.length?t.attr("data-product-groups",o.groups.map((function(t){return t.id})).join(",")).removeClass("product-block-empty"):t.removeAttr("data-product-groups").addClass("product-block-empty"),n.setBlockConfiguration(t,o),o}function u(t,e){console.log("updateBlockLabel");var o=$(".stripo-preview-frame").contents().find(".product-block-text"),n=$("#txtTitle").val(),r=e.groups[0].name;o.html(r),o.attr("type",r),e.properties.push(n),e.properties.forEach(s)}function s(t){$(".stripo-preview-frame").contents().find(".product-block-text").attr("attributes","title="+t)}return{name:"CustomBlocks",iconClass:"es-icon-product",uniqueClassName:"product-block",canBeSavedToLibrary:!0,settingsCssPath:"/assets/css/settings.css",previewCssPath:"/assets/css/preview.css",i18n:c,blockName:"block.name",emptyContainerIcon:!0,blockType:"multi-orientation",blockConfigAttributeNames:["esd-dev-product-config"],controlsToCreate:[{control:p},{control:b}],blockControls:[r,i],emailInitialized:function(t){},getBlockLayoutToDrop:function(){console.log("getBlockLayoutToDrop");var t=e.jQuery('<td class="esd-structure esd-product-empty-layout" align="left">\n    <table cellpadding="0" cellspacing="0" width="100%">\n        <tbody>\n            <tr>\n                <td width="560" class="esd-container-frame" align="center" valign="top">\n                    <table cellpadding="0" cellspacing="0" width="100%">\n                        <tbody>\n                            <tr>\n                                <td class="esd-block-html">\n                                    <span class="es-icon-image" title="#SELECT_GROUP#"></span>\n                                    <custom-block class="product-block-text" type="#SELECT_GROUP#">#SELECT_GROUP#</custom-block>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</td>\n'.replace(/#SELECT_GROUP#/g,e.translate("preview.empty.description")));return a(t),t[0].outerHTML},blockDropped:function(t){},getBlockLabel:function(t){return n.getBlockConfiguration(t).groups.map((function(t){return t.name})).join(", ")||e.translate("preview.empty.description")},getDefaultSettingsPanelState:function(t){return{blockConfig:n.getBlockConfiguration(t)}},onBlockCopy:function(t,e){var o=n.getBlockConfigurationForCopiedBlock(e);l(0,o=a(e,o))},updateLayout:l,wrapBlockWithTypeIdentifierAttributesAndGetConfig:a,updateBlockLabel:u,blockConfigurationService:n}}function O(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function v(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?O(Object(o),!0).forEach((function(e){P(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function P(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var B={create:function(t,e,o){return Object.assign(v(v({stripoConfig:t,stripoApi:e,extensionBasePath:o},n),k(t,e)))}};self.ProductBlockExtension=B}]);